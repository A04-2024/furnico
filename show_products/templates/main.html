{% extends 'base.html' %}
{% block content %}
{% include 'navbar.html' %}
<script defer src="https://unpkg.com/alpinejs@3.2.3/dist/cdn.min.js"></script>
<div class="flex flex-col p-8">
    <div class="py-8">
        <article x-data="slider" class="relative w-full flex flex-shrink-0 overflow-hidden shadow-2xl">
    
            <div class="rounded-full bg-gray-600 text-white absolute top-5 right-5 text-sm px-2 text-center z-10">
                <span x-text="currentIndex"></span>/
                <span x-text="images.length"></span>
            </div>
        
            <template x-for="(image, index) in images">
                <figure class="h-96" x-show="currentIndex == index + 1" x-transition:enter="transition transform duration-300"
                x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                x-transition:leave="transition transform duration-300" x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0">
                <img :src="image" alt="Image" class="absolute inset-0 z-10 h-full w-full object-cover opacity-70" />
                
                </figure>
            </template>
        
            <button @click="back()"
                class="absolute left-14 top-1/2 -translate-y-1/2 w-11 h-11 flex justify-center items-center rounded-full shadow-md z-10 bg-gray-100 hover:bg-gray-200">
                <svg class=" w-8 h-8 font-bold transition duration-500 ease-in-out transform motion-reduce:transform-none text-gray-500 hover:text-gray-600 hover:-translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7">
                    </path>
                </svg>
            </button>
        
            <button @click="next()"
            class="absolute right-14 top-1/2 translate-y-1/2 w-11 h-11 flex justify-center items-center rounded-full shadow-md z-10 bg-gray-100 hover:bg-gray-200">
                <svg class=" w-8 h-8 font-bold transition duration-500 ease-in-out transform motion-reduce:transform-none text-gray-500 hover:text-gray-600 hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </article>
    </div>
    
    <div class="py-8">
        <h1 class="text-4xl font-extrabold pb-4">Jelajahi kategori unggulan kami</h1>
        <h3 class="text-xl">Temukan beragam produk yang sesuai dengan gaya dan kebutuhan Anda.</h3>
    </div>

    
    
    
    {% if not product_entries %}
    <p>Belum ada data product pada furnico.</p>
    {% else %}
    <table>
      
    
      {% comment %} Berikut cara memperlihatkan data mood di bawah baris ini 
      {% endcomment %} 
      {% for category in categories %}
        <tr>
            <td>{{category.category_name}}</td>
            <td>
                <a href="{% url 'show_products:edit_category' category.pk %}">
                    <button>
                        Edit Kategori
                    </button>
                </a>
            </td>
            <td>
                <a href="{% url 'show_products:delete_category' category.pk %}">
                    <button>
                        Delete
                    </button>
                </a>
            </td>
        </tr>
    
        {% if category.unique_products == 0 %}
            <tr>
                <td>Tidak ada produk dalam kategori ini!</td>
            </tr>
        {% else %}
    
            <tr>
                <th>Product Image</th>
                <th>Product Name</th>
                <th>Product Subtitle</th>
                <th>Product Price</th>
                <th>Product Description</th>
                <th>Product Advantages</th>
                <th>Product Material</th>
                <th>Product Size</th>
                <th>Product Category</th>
                <th>Sold this week</th>
                <th>People Bought</th>
            </tr>
            
            {% for product_entry in product_entries %}
                {% if product_entry.product_category == category %}
                <tr>
                    <td><img src="{{product_entry.product_image}}"></td>
                    <td>{{product_entry.product_name}}</td>
                    <td>{{product_entry.product_subtitle}}</td>
                    <td>{{product_entry.product_price}}</td>
                    <td>{{product_entry.product_description}}</td>
                    <td>{{product_entry.product_advantages}}</td>
                    <td>{{product_entry.product_material}}</td>
                    <td>{{product_entry.product_size_length}} x {{product_entry.product_size_height}} x {{product_entry.product_size_long}}</td>
                    <td>{{product_entry.product_category}}</td>
                    <td>{{product_entry.sold_this_week}}</td>
                    <td>{{product_entry.people_bought}}</td>
    
                    <td>
                        <a href="{% url 'show_products:edit_product' product_entry.pk %}">
                            <button>
                                Edit
                            </button>
                        </a>
                    </td>
                    <td>
                        <a href="{% url 'show_products:delete_product' product_entry.pk %}">
                            <button>
                                Delete
                            </button>
                        </a>
                    </td>
                </tr>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
    </table>
    {% endif %}
    
    <br />
    
    <a href="{% url 'show_products:create_product_entry' %}">
      <button>Add New Mood Entry</button>
    </a>
    
    <a href="{% url 'show_products:create_category' %}">
      <button>Add New Category</button>
    </a>
</div>

<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('slider', () => ({
            currentIndex: 1,
            images: [
                'https://d2xjmi1k71iy2m.cloudfront.net/dairyfarm/id/pageImages/page__en_us_1726675984779_0_1.webp',
                'https://d2xjmi1k71iy2m.cloudfront.net/dairyfarm/id/pageImages/page__en_us_1726675985899_0_5.webp',
                'https://d2xjmi1k71iy2m.cloudfront.net/dairyfarm/id/pageImages/page__en_us_1729592407263__1.webp',
            ],
            back() {
                if (this.currentIndex > 1) {
                    this.currentIndex = this.currentIndex - 1;
                }
            },
            next() {
                if (this.currentIndex < this.images.length) {
                    this.currentIndex = this.currentIndex + 1;
                } else if (this.currentIndex <= this.images.length){
                    this.currentIndex = this.images.length - this.currentIndex + 1
                }
            },
        }))
    })
</script>

{% endblock content %}